## 函数高级

### CB

- 一个函数的参数也可以是函数，如果将函数作为参数传递，那么我们就称这个函数为回调函数（callback）
- [java中用lambda表达式来实现函数作为参数传递](https://blog.csdn.net/qq_25073223/article/details/125809809)

高阶函数

- 如果一个函数的参数或返回值是函数，则这个函数就称为高阶函数
- 为什么要将函数作为参数传递？（回调函数有什么作用？）
  - 将函数作为参数，意味着可以对另一个函数动态的传递代码
  - 通常回调函数都是匿名函数

### 闭包

- 闭包就是能访问到外部函数作用域中变量的函数

- 什么时候使用：当我们需要隐藏一些不希望被别人访问的内容时就可以使用闭包

  ![image-20230319211205451](../../../AppData/Roaming/Typora/typora-user-images/image-20230319211205451.png)

- 闭包：

  闭包就是能访问得到外部函数作用域中变量的函数。

- 什么时候使用：

  当我们需要隐藏一些不希望被别人访问的内容时就可以使用闭包。

- 构成闭包的要件：

  1. 函数的嵌套
  2. 内部函数要引用外部函数中的变量
  3. 内部函数要作为返回值返回

- 函数的作用域

  - 在函数创建时就已经确定的（词法作用域）和调用的位置无关
  - 函数在全局作用域创建，那么它的外层作用域就是全局作用域
  - 闭包利用的就是词法作用域

- 闭包的生命周期：

  - 闭包在外部函数调用时产生，外部函数每次调用都会产生一个全新的闭包
  - 在内部函数丢失时销毁（内部函数被垃圾回收了，闭包才会消失）

- 注意事项：

  - 闭包主要用来隐藏一些不希望被外部访问的内容,这就意味着闭包需要占用一定的内存空间
  - 相较于类来说，闭包比较浪费内存空间（类可以使用原型而闭包不能），
  - 需要执行次数较少时，使用闭包
  - 需要大量创建实例时，使用类



### 递归函数

- 调用自身的函数被称为递归函数。
- 递归的作用和循环是基本一致的。
- 递归的核心思想就是将一个大的问题拆分成一个一个小的问题，小的问题解决了，大的问题也就解决了。
- 递归条件：
  - 1、基线条件。----递归的终止条件
  - 2、递归条件。----如何对问题进行拆分



### 可变参数 [arguments]

arguments

- arguments是函数中的一个隐含参数

- arguments是一个类数组对象（伪数组） 和数组相似，可以通过索引来读取元素，也可以通过for循环变量， 但是它不是一个数组对象，不能调用数组的方法

- arguments用来存储函数的实参，无论用户是否定义形参，实参都会存储到arguments对象中

- 可以通过该对象直接访问实参

- ```javascript
  function fu(){
     console.log(arguments);
  }
  fu(1,2,4);
  ```

 可变参数，在定义函数时可以将参数指定为可变参数

- 可变参数可以接收任意数量实参，并将他们统一存储到一个数组中返回

- 可变参数的作用和arguments基本是一致，但是也具有一些不同点：

  1. 可变参数的名字可以自己指定
  2. 可变参数就是一个数组，可以直接使用数组的方法
  3. 可变参数可以配合其他参数一起使用
  4. 当可变参数和普通参数一起使用时，需要将可变参数写到最后

- ```javascript
  function fu1(...a){
      return a.reduce((a,b)=>a+b,0);
  }
  let result=fu1(1,2,3,4,5);
  console.log(result);//15
  ```

### call、apply和bind

根据函数调用方式的不同，this的值也不同：

1. 以函数形式调用，this是window
2. 以方法形式调用，this是调用方法的对象
3. 构造函数中，this是新建的对象
4. 箭头函数没有自己的this，由外层作用域决定,外层this是谁,他的this就是谁
5. 通过call和apply调用的函数，它们的第一个参数就是函数的this
6. 通过bind返回的函数，this由bind第一个参数决定（且this无法修改）

调用函数除了通过 函数() 这种形式外，还可以通过其他的方式来调用函数

- 比如，我们可以通过调用函数的call()和apply()两个个方法来调用函数

  ```javascript
  函数.call() [函数对象.方法]
  函数.apply()
  ```

- call 和 apply除了可以调用函数，还可以用来指定函数中的this
- call和apply的第一个参数，将会成为函数的this
- 通过call方法调用函数，函数的实参直接在第一个参数后一个一个的列出来
- 通过apply方法调用函数，函数的实参需要通过一个数组传递

bind() 是函数的方法，可以用来创建一个新的函数并返回

- bind可以为新函数绑定this
- bind可以为新函数绑定参数，参数排列非数组

> 箭头函数没有自身的this，它的this由外层作用域决定，也无法通过call、apply和bind修改它的this 箭头函数中没有arguments