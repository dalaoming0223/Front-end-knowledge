### 对象的结构

对象中存储属性的区域实际有两个：

- 对象自身
  - 直接通过对象所添加的属性，位于对象自身中
  - 在类中通过 x = y 的形式添加的属性，位于对象自身中
- 原型对象（prototype）
  - 对象中还有一些内容，会存储到其他的对象里（原型对象）
  - 在对象中会有一个属性用来存储原型对象，这个属性叫做**proto**（隐式原型）
  - 原型对象也负责为对象存储属性，当我们访问对象中的属性时，会优先访问对象自身的属性，对象自身不包含该属性时，才会去原型对象中寻找
  - 会添加到原型对象中的情况：
    - 在类中通过xxx(){}方式添加的方法，位于原型中
    - 主动向原型中添加的属性或方法

### 原型对象

访问一个对象的原型对象：

- 对象.__proto__
- Object.getPrototypeOf(对象)
- 类.prototype 、构造函数.prototype

#### 原型对象中的数据

1. 对象中的数据（属性、方法等）
2. constructor （对象的构造函数）【也就是类本身】

注意： 原型对象也有原型，这样就构成了一条原型链（隐式原型链），根据对象的复杂程度不同，原型链的长度也不同 原型链：

- 读取对象属性时，会优先对象自身属性，如果对象中有，则使用，没有则去对象的原型中寻找
- 如果原型中有，则使用，没有则去原型的原型中寻找
- 直到找到Object对象的原型（Object的原型没有隐式原型（为null））
- 如果依然没有找到，则返回undefined
- 原型链，是找属性的链，找不到会返回undefined

### instanceof和hasOwn

- instanceof 用来检查一个对象是否是一个类的实例
  - instanceof检查的是对象的原型链上是否有该类实例，只要原型链上有该类实例，就会返回true
- in
  - 使用in运算符检查属性时，无论属性在对象自身还是在原型中，都会返回true
- 对象.hasOwnProperty(属性名) (不推荐使用)     实例方法
  - 用来检查一个对象的自身是否含有某个属性
- Object.hasOwn(对象, 属性名)   静态方法
  - 用来检查一个对象的自身是否含有某个属性

### 旧类

早期JS中，直接通过函数来定义类

- 一个函数如果直接调用 xxx() 那么这个函数就是一个普通函数

- 一个函数如果通过new调用 new xxx() 那么这个函数就是一个构造函数

- 了解旧类的写法与原理

  ```javascript
  var Person = (function () {
      function Person(name, age) {
          // 在构造函数中，this表示新建的对象
          this.name = name
          this.age = age
  
          // this.sayHello = function(){
          //     console.log(this.name)
          // }
      }
  
      // 向原型中添加属性（方法）
      Person.prototype.sayHello = function () {
          console.log(this.name)
      }
  
      // 静态属性
      Person.staticProperty = "xxx"
      // 静态方法
      Person.staticMethod = function () {}
  
      return Person
  })()
  
  const p = new Person("孙悟空", 18)
  ```

### new运算符

- 当使用new去调用一个函数时，这个函数将会作为构造函数调用
- 使用new调用函数时，将会发生这些事：
  1. 创建一个普通的JS对象（Object对象 {}）, 为了方便，称其为新对象
  2. 新对象的隐式原型=构造函数的显示原型
  3. 使用实参来执行构造函数，并且将新对象设置为函数中的this
  4. 如果构造函数返回的是一个非原始值，则该值会作为new运算的返回值返回（千万不要这么做） 如果构造函数的返回值是一个原始值或者没有指定返回值，则新的对象将会作为返回值返回 通常不会为构造函数指定返回值

### 总结

对象的分类：

- 内建对象
  - 由ES标准所定义的对象
  - 比如 Object Function String Number ....
- 宿主对象
  - 由浏览器提供的对象：BOM、DOM(window\document)
- 自定义对象
  - 由开发人员自己创建的对象